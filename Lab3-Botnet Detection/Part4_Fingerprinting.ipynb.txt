{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 38,
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "from io import StringIO\n",
    "import csv\n",
    "from pandas import read_csv\n",
    "import numpy as np\n",
    "from sklearn.datasets import load_iris\n",
    "from sklearn.cluster import KMeans\n",
    "import matplotlib.pyplot as plt\n",
    "from collections import defaultdict\n",
    "from nltk import ngrams\n",
    "import collections"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "output = StringIO()\n",
    "csv_writer = csv.writer(output)\n",
    "column_name = ['Dateflowstart', 'Durat', 'Prot', 'SrcIPAddr:Port', 'DstIPAddr:Port', 'Flags', 'Tos', 'PacketsBytes', 'Flows', 'Label', 'Labels']\n",
    "Botnet_data = pd.DataFrame(columns = column_name)\n",
    "with open('capture20110818.pcap', 'rb') as f:\n",
    "    next(f)\n",
    "    for index, line in enumerate(f):\n",
    "        #print(line)\n",
    "        parser = line.decode(\"utf-8\")\n",
    "        split_by_space = parser.split('\\t')\n",
    "        #print(parser)\n",
    "        #print(split_by_space)\n",
    "        temp1 =  [x for x in split_by_space if x != '->']\n",
    "        temp2 =  [x for x in temp1 if x != '']\n",
    "        temp2[-1] = temp2[-1].split('\\n')[0]\n",
    "        #print(temp2)\n",
    "        if(len(temp2)==1):\n",
    "            \n",
    "            #print(line)\n",
    "            #print(parser)\n",
    "            split_by_space = parser.split(' ')\n",
    "            #print(split_by_space)\n",
    "            temp1 =  [x for x in split_by_space if x != '->']\n",
    "            temp2 =  [x for x in temp1 if x != '']\n",
    "            temp2[-1] = temp2[-1].split('\\n')[0]\n",
    "            #print(temp2)\n",
    "            x=temp2.pop(1)\n",
    "            temp2[0]=temp2[0]+' '+x\n",
    "            #print(temp1)\n",
    "            #print(temp2)\n",
    "        #print(temp1)\n",
    "        #temp3 =  [x.split('\\n')[0] for x in temp2 if '\\n' in x]\n",
    "        #print(temp2)\n",
    "        if(temp2[-1]!='Background'):\n",
    "            #print(temp2[-1])\n",
    "            csv_writer.writerow(temp2)\n",
    "#         Botnet_data.loc[index-1] = pd.Series(temp2, index=column_name)\n",
    "    output.seek(0) # we need to get back to the start of the BytesIO\n",
    "    Botnet_data = read_csv(output)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "   2011-08-18 10:19:13.347  4.985  TCP      147.32.80.13:80  \\\n",
      "0  2011-08-18 10:19:13.392  0.000  TCP  147.32.86.110:48102   \n",
      "1  2011-08-18 10:19:13.411  4.921  TCP   147.32.85.88:56949   \n",
      "2  2011-08-18 10:19:13.460  4.742  TCP    147.32.84.59:2768   \n",
      "3  2011-08-18 10:19:13.486  0.000  TCP   147.32.84.59:56058   \n",
      "4  2011-08-18 10:19:13.689  4.434  TCP  147.32.84.164:34588   \n",
      "\n",
      "   147.32.85.88:56949 PA_  0   91  86277  1  LEGITIMATE  \n",
      "0  74.125.232.214:443  A_  0    1     66  1  LEGITIMATE  \n",
      "1     147.32.80.13:80  A_  0   49   3234  1  LEGITIMATE  \n",
      "2   74.125.108.208:80  A_  0  118   7080  1  LEGITIMATE  \n",
      "3  74.125.232.215:443  A_  0    1     60  1  LEGITIMATE  \n",
      "4   195.24.232.164:80  A_  0   30   1980  1  LEGITIMATE  \n"
     ]
    }
   ],
   "source": [
    "print(Botnet_data.head())\n",
    "Botnet_data.columns = column_name\n",
    "Botnet_data.head()\n",
    "Botnet_data.to_csv('Botnet_data111.csv', sep='\\t')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "645357"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "len(Botnet_data)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Dateflowstart</th>\n",
       "      <th>Durat</th>\n",
       "      <th>Prot</th>\n",
       "      <th>SrcIPAddr:Port</th>\n",
       "      <th>DstIPAddr:Port</th>\n",
       "      <th>Flags</th>\n",
       "      <th>Tos</th>\n",
       "      <th>PacketsBytes</th>\n",
       "      <th>Flows</th>\n",
       "      <th>Label</th>\n",
       "      <th>Labels</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2011-08-18 10:19:13.392</td>\n",
       "      <td>0.000</td>\n",
       "      <td>TCP</td>\n",
       "      <td>147.32.86.110:48102</td>\n",
       "      <td>74.125.232.214:443</td>\n",
       "      <td>A_</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>66</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2011-08-18 10:19:13.411</td>\n",
       "      <td>4.921</td>\n",
       "      <td>TCP</td>\n",
       "      <td>147.32.85.88:56949</td>\n",
       "      <td>147.32.80.13:80</td>\n",
       "      <td>A_</td>\n",
       "      <td>0</td>\n",
       "      <td>49</td>\n",
       "      <td>3234</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2011-08-18 10:19:13.460</td>\n",
       "      <td>4.742</td>\n",
       "      <td>TCP</td>\n",
       "      <td>147.32.84.59:2768</td>\n",
       "      <td>74.125.108.208:80</td>\n",
       "      <td>A_</td>\n",
       "      <td>0</td>\n",
       "      <td>118</td>\n",
       "      <td>7080</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2011-08-18 10:19:13.486</td>\n",
       "      <td>0.000</td>\n",
       "      <td>TCP</td>\n",
       "      <td>147.32.84.59:56058</td>\n",
       "      <td>74.125.232.215:443</td>\n",
       "      <td>A_</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>60</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2011-08-18 10:19:13.689</td>\n",
       "      <td>4.434</td>\n",
       "      <td>TCP</td>\n",
       "      <td>147.32.84.164:34588</td>\n",
       "      <td>195.24.232.164:80</td>\n",
       "      <td>A_</td>\n",
       "      <td>0</td>\n",
       "      <td>30</td>\n",
       "      <td>1980</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "             Dateflowstart  Durat Prot       SrcIPAddr:Port  \\\n",
       "0  2011-08-18 10:19:13.392  0.000  TCP  147.32.86.110:48102   \n",
       "1  2011-08-18 10:19:13.411  4.921  TCP   147.32.85.88:56949   \n",
       "2  2011-08-18 10:19:13.460  4.742  TCP    147.32.84.59:2768   \n",
       "3  2011-08-18 10:19:13.486  0.000  TCP   147.32.84.59:56058   \n",
       "4  2011-08-18 10:19:13.689  4.434  TCP  147.32.84.164:34588   \n",
       "\n",
       "       DstIPAddr:Port Flags  Tos  PacketsBytes  Flows  Label      Labels  \n",
       "0  74.125.232.214:443    A_    0             1     66      1  LEGITIMATE  \n",
       "1     147.32.80.13:80    A_    0            49   3234      1  LEGITIMATE  \n",
       "2   74.125.108.208:80    A_    0           118   7080      1  LEGITIMATE  \n",
       "3  74.125.232.215:443    A_    0             1     60      1  LEGITIMATE  \n",
       "4   195.24.232.164:80    A_    0            30   1980      1  LEGITIMATE  "
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# print(pd.unique(Botnet_data['SrcIPAddr:Port']))\n",
    "# print(Botnet_data.shape)\n",
    "# temp =Botnet_data.groupby('SrcIPAddr:Port')\n",
    "# temp.describe()\n",
    "# for key, item in temp:\n",
    "#     print (temp.get_group(key), \"\\n\\n\")\n",
    "Botnet_data.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**clustering all features**\n",
    "\n",
    "\n",
    "possible features: Durat/Prot/Flags/Tos/PacketsBytes/Flows\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "-------------Durat---------------------\n",
      "0.2    0.000\n",
      "0.4    0.000\n",
      "0.6    0.000\n",
      "0.8    0.442\n",
      "Name: Durat, dtype: float64\n",
      "-------------Prot---------------------\n",
      "['TCP' 'UDP' 'ICMP']\n",
      "-------------Flags---------------------\n",
      "['A_' 'PA_' 'FA_' 'SPA_' 'FPA_' 'INT' 'FSA_' '_FSA' 'FSPA_' '_FSPA' 'S_'\n",
      " 'RA_' 'FSRPA_' 'SA_' '_FSRPA' 'SRPA_' 'FRPA_' 'ECO' 'URH' 'SR_' 'FRA_'\n",
      " 'RPA_' 'R_' 'FSPAEC_' 'SRA_' '_FSRA' 'URP' 'PAC_' 'MAS' 'TST' 'IRR' 'ECR'\n",
      " 'RTS' 'RTA' 'IRQ' 'UNK' 'MSR' 'TSR' 'SEC' 'ROB' 'MRQ' 'RED' 'IAH' 'TXD'\n",
      " 'DNQ' 'PTB' 'PAR' 'NRA' 'WAY' 'PHO' '___' 'AHA' 'NRS' 'MHR' 'UR' 'NNA'\n",
      " 'MRP' 'TRC' 'DCE' 'SKP' 'SRC' 'NNS' 'DNP' 'URN' 'URPRE' 'URS' 'URNU'\n",
      " 'URCUT' 'URISO' 'URNPRO' 'URHPRO' 'URHTOS' 'URHU' 'SPAC_' 'SEC_' 'FSRA_'\n",
      " 'URFIL' 'FSPAC_']\n",
      "-------------Tos---------------------\n",
      "0.2    0.0\n",
      "0.4    0.0\n",
      "0.6    0.0\n",
      "0.8    0.0\n",
      "Name: Tos, dtype: float64\n",
      "-------------PacketsBytes---------------------\n",
      "0.2    1.0\n",
      "0.4    1.0\n",
      "0.6    2.0\n",
      "0.8    5.0\n",
      "Name: PacketsBytes, dtype: float64\n",
      "-------------Flows---------------------\n",
      "0.2     132.0\n",
      "0.4    1066.0\n",
      "0.6    1066.0\n",
      "0.8    2132.0\n",
      "Name: Flows, dtype: float64\n"
     ]
    }
   ],
   "source": [
    "print('-------------Durat---------------------')\n",
    "print(Botnet_data['Durat'].quantile([0.2,0.4,0.6,0.8]))\n",
    "print('-------------Prot---------------------')\n",
    "print(pd.unique(Botnet_data['Prot']))\n",
    "print('-------------Flags---------------------')\n",
    "print(pd.unique(Botnet_data['Flags']))\n",
    "print('-------------Tos---------------------')\n",
    "print(Botnet_data['Tos'].quantile([0.2,0.4,0.6,0.8]))\n",
    "print('-------------PacketsBytes---------------------')\n",
    "print(Botnet_data['PacketsBytes'].quantile([0.2,0.4,0.6,0.8]))\n",
    "print('-------------Flows---------------------')\n",
    "print(Botnet_data['Flows'].quantile([0.2,0.4,0.6,0.8]))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "so we abandon 'Tos' and assign value for categorical data. Then we factorize our categorical features."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "             Dateflowstart  Durat  Prot       SrcIPAddr:Port  \\\n",
      "0  2011-08-18 10:19:13.392  0.000     1  147.32.86.110:48102   \n",
      "1  2011-08-18 10:19:13.411  4.921     1   147.32.85.88:56949   \n",
      "2  2011-08-18 10:19:13.460  4.742     1    147.32.84.59:2768   \n",
      "3  2011-08-18 10:19:13.486  0.000     1   147.32.84.59:56058   \n",
      "4  2011-08-18 10:19:13.689  4.434     1  147.32.84.164:34588   \n",
      "\n",
      "       DstIPAddr:Port  Flags  Tos  PacketsBytes  Flows  Label      Labels  \n",
      "0  74.125.232.214:443      0    0             1     66      1  LEGITIMATE  \n",
      "1     147.32.80.13:80      0    0            49   3234      1  LEGITIMATE  \n",
      "2   74.125.108.208:80      0    0           118   7080      1  LEGITIMATE  \n",
      "3  74.125.232.215:443      0    0             1     60      1  LEGITIMATE  \n",
      "4   195.24.232.164:80      0    0            30   1980      1  LEGITIMATE  \n"
     ]
    }
   ],
   "source": [
    "# replace_port = {'TCP':1, 'UDP':2, 'ICMP':3}\n",
    "# replace_flag = {'A_':1, 'FA_':2, 'PA_':3, 'FPA_':4, 'FSPA_':5, '_FSPA':6, 'INT':7, 'FSA_':8, '_FSA':9, 'SPA_':10,\n",
    "#  'SRPA_':11, 'RA_':12, 'FRPA_':13, 'FSRPA_':14, 'URH':15, 'SA_':16, 'RPA_':17, 'FRA_':18, 'ECO' :19,'S_' :20,'R_':21,\n",
    "#  '_FSRPA':22, 'FSPAC_':23, 'SRA_':24, 'TXD':25, 'URFIL' :26,'SR_':27, 'URP':28, '_FSRA':29, 'URHPRO':30, 'URN':31}\n",
    "\n",
    "stacked = Botnet_data[['Flags','Prot']].stack()\n",
    "Botnet_data[['Flags','Prot']] = pd.Series(stacked.factorize()[0], index=stacked.index).unstack()\n",
    "print(Botnet_data.head())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:6: FutureWarning: reshape is deprecated and will raise in a subsequent release. Please use .values.reshape(...) instead\n",
      "  \n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:7: FutureWarning: reshape is deprecated and will raise in a subsequent release. Please use .values.reshape(...) instead\n",
      "  import sys\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:8: FutureWarning: reshape is deprecated and will raise in a subsequent release. Please use .values.reshape(...) instead\n",
      "  \n"
     ]
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<matplotlib.figure.Figure at 0x20737e05240>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAYUAAAERCAYAAACU1LsdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDIuMS4yLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvNQv5yAAAIABJREFUeJzt3Xl8VfWd//HXJ3tCgJDcoAgoSNDKGjRSlbi0dgH3Vh1ldDp2bO1qt2lnuvy6z8zDVqfT2jpVW5epXVw7ylTQbi4gQgUFAZUSlkokQMKSEEjI9vn9cU/CJQSSYA7n3tz38/HIg3PPPffez0XM+57v957P19wdERERgIyoCxARkeShUBARkS4KBRER6aJQEBGRLgoFERHpolAQEZEuKRkKZnavmW03s9V9OPY8M3vZzNrM7Kpu9/2jma0Lfv4xvIpFRFJDSoYCcD8wu4/HvgncAPw6caeZFQPfBN4JzAS+aWYjBq5EEZHUk5Kh4O7PAzsT95nZBDN7ysyWm9lCM3tHcOwmd38V6Oj2NO8H/uDuO919F/AH+h40IiKDUlbUBQygu4GPu/s6M3sn8N/Au49w/Ghgc8Lt6mCfiEjaGhShYGaFwDnAI2bWuTu3t4f1sE89P0QkrQ2KUCA+DLbb3cv78Zhq4IKE22OAZwewJhGRlJOScwrduXsDsNHMrgawuOm9POxp4H1mNiKYYH5fsE9EJG2lZCiY2W+AF4FTzazazG4ErgNuNLOVwBrg8uDYM82sGrgauMvM1gC4+07gu8BLwc93gn0iImnL1DpbREQ6peSZgoiIhCPlJppjsZiPGzcu6jJERFLK8uXL69y9tLfjUi4Uxo0bx7Jly6IuQ0QkpZjZ3/pynIaPRESkS2ih0FvTuuBro7ebWZWZvWpmp4dVi4iI9E2YZwr3c+ReQnOAicHPTcBPQ6xFRET6ILQ5BXd/3szGHeGQy4FfePw7sUvMrMjMRrl7TVg1icjAaW1tpbq6mubm5qhLkQR5eXmMGTOG7Ozso3p8lBPNh2tId0gomNlNxM8mOPHEE49JcSJyZNXV1QwdOpRx48aR0HNMIuTu7Nixg+rqasaPH39UzxHlRHOfG9K5+93uXuHuFaWlvX6jSkSOgebmZkpKShQIScTMKCkpeVtnb1GGQjUwNuH2GGBLRLWIyFFQICSft/vfJMpQmAd8KPgW0llAfZjzCcv/totbFryB2nqIiBxemF9JPaRpnZl93Mw+HhwyH9gAVAE/Az4ZVi0Aa7bUc+dz63lz574wX0ZEjqHMzEzKy8uZMmUKV199Nfv29f//729961vcdtttfT7+8ccf57XXXjviMffffz+lpaWUl5czefJkrrrqql5ru//++9myJfrBktBCwd3nuvsod8929zHufo+73+nudwb3u7t/yt0nuPtUdw/1MuXKshgAi6rqwnwZETmG8vPzWbFiBatXryYnJ4c777wz9NfsSygAXHPNNaxYsYI1a9aQk5PDQw89dMTjB30oJJvxsSGcMDyPResUCiKD0bnnnktVVRUAV1xxBWeccQaTJ0/m7rvv7jrmqaee4vTTT2f69OlceOGFhzzHz372M+bMmUNTUxPr169n9uzZnHHGGZx77rm88cYbLF68mHnz5vGlL32J8vJy1q9fz+23386kSZOYNm0a11577SHP2dbWxt69exkxYgR79uxh/PjxtLa2AtDQ0MC4ceN45JFHWLZsGddddx3l5eU0NTWxfPlyzj//fM444wze//73U1MTH13v7fXerpTrfXS0zIxZZTF+/9o22juczAxNkIkMlG//3xpe29IwoM856YRhfPPSyX06tq2tjQULFjB7dvx62XvvvZfi4mKampo488wzufLKK+no6OCjH/0ozz//POPHj2fnzoOXT/nJT37C73//ex5//HFyc3O56aabuPPOO5k4cSJLly7lk5/8JH/+85+57LLLuOSSS7jqqqsAuOWWW9i4cSO5ubns3r276/keeughFi1aRE1NDaeccgqXXnopmZmZXHDBBTz55JNcccUVPPjgg1x55ZVcffXV3HHHHdx2221UVFTQ2trKzTffzBNPPEFpaSkPPfQQX/va17j33nsP+3oDJW3OFAAqJ8aob2plzZb6qEsRkQHQ1NREeXk5FRUVnHjiidx4441A/NP09OnTOeuss9i8eTPr1q1jyZIlnHfeeV3f3y8uLu56ngceeIAFCxbw2GOPkZubS2NjI4sXL+bqq6+mvLycj33sY12f1LubNm0a1113Hb/85S/JyjrwObtz+Gjr1q1MnTqVW2+9FYCPfOQj3HfffQDcd999fPjDHz7kOdeuXcvq1at573vfS3l5Of/2b/9GdXX1EV9voKTNmQLAORPi8woL19Ux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\n",
      "text/plain": [
       "<matplotlib.figure.Figure at 0x20737eb11d0>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<matplotlib.figure.Figure at 0x20739750e10>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Durat/Prot/Flags/PacketsBytes/Flows\n",
    "sse1 = {}\n",
    "sse4 = {}\n",
    "sse5 = {}\n",
    "for k in range(1, 10):\n",
    "    kmeans1 = KMeans(n_clusters=k, max_iter=1000).fit(Botnet_data['Durat'].reshape(-1, 1))\n",
    "    kmeans4 = KMeans(n_clusters=k, max_iter=1000).fit(Botnet_data['PacketsBytes'].reshape(-1, 1))\n",
    "    kmeans5 = KMeans(n_clusters=k, max_iter=1000).fit(Botnet_data['Flows'].reshape(-1, 1))\n",
    "    Botnet_data['ClusterDurat'] = kmeans1.labels_\n",
    "    Botnet_data['ClusterPacketsBytes'] = kmeans4.labels_\n",
    "    Botnet_data['ClusterFlows'] = kmeans5.labels_\n",
    "    #print(data[\"clusters\"])\n",
    "    sse1[k] = kmeans1.inertia_ # Inertia: Sum of distances of samples to their closest cluster center\n",
    "    sse4[k] = kmeans4.inertia_\n",
    "    sse5[k] = kmeans5.inertia_\n",
    "plt.figure()\n",
    "plt.plot(list(sse1.keys()), list(sse1.values()),label = 'Durat')\n",
    "plt.legend(loc='upper right')\n",
    "plt.xlabel(\"Number of cluster\")\n",
    "plt.ylabel(\"SSE\")\n",
    "plt.show()\n",
    "plt.plot(list(sse4.keys()), list(sse4.values()),label = 'PacketsBytes')\n",
    "plt.legend(loc='upper right')\n",
    "plt.xlabel(\"Number of cluster\")\n",
    "plt.ylabel(\"SSE\")\n",
    "plt.show()\n",
    "plt.plot(list(sse5.keys()), list(sse5.values()),label = 'Flows')\n",
    "plt.legend(loc='upper right')\n",
    "plt.xlabel(\"Number of cluster\")\n",
    "plt.ylabel(\"SSE\")\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "so for durat we choose 2 as number of clusters, 3 for packetbytes and 4 for flows. \n",
    "\n",
    "Then we calculate the threshold of different features, results can be found below.\n",
    "\n",
    "we assign  0 when DURAT is smaller than 0.22, or we set 1.\n",
    "\n",
    "we assign 0 when PacketsBytes is smaller than 1.0. Or we set 1.\n",
    "\n",
    "we assign 0 when Flows is smaller than 261.0. For its value between 261.0 and 1066.0, we set 1 and for value from 1066.0 to 1306.0 we set 2, or we set 3."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "-------------Durat---------------------\n",
      "0.75    0.222\n",
      "Name: Durat, dtype: float64\n",
      "-------------PacketsBytes---------------------\n",
      "0.33    1.0\n",
      "0.66    2.0\n",
      "Name: PacketsBytes, dtype: float64\n",
      "-------------Flows---------------------\n",
      "0.25     261.0\n",
      "0.50    1066.0\n",
      "0.75    1306.0\n",
      "Name: Flows, dtype: float64\n"
     ]
    }
   ],
   "source": [
    "print('-------------Durat---------------------')\n",
    "print(Botnet_data['Durat'].quantile([0.75]))\n",
    "print('-------------PacketsBytes---------------------')\n",
    "print(Botnet_data['PacketsBytes'].quantile([0.33,0.66]))\n",
    "print('-------------Flows---------------------')\n",
    "print(Botnet_data['Flows'].quantile([0.25,0.5,0.75]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "(645357, 14)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Durat</th>\n",
       "      <th>Prot</th>\n",
       "      <th>Flags</th>\n",
       "      <th>PacketsBytes</th>\n",
       "      <th>Flows</th>\n",
       "      <th>Label</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.000000</td>\n",
       "      <td>6.453570e+05</td>\n",
       "      <td>645357.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>0.628296</td>\n",
       "      <td>10.347725</td>\n",
       "      <td>17.386899</td>\n",
       "      <td>17.501792</td>\n",
       "      <td>1.347249e+04</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>1.399220</td>\n",
       "      <td>9.414517</td>\n",
       "      <td>15.481148</td>\n",
       "      <td>123.108235</td>\n",
       "      <td>1.337653e+05</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>6.000000e+01</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>2.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>2.610000e+02</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>7.000000</td>\n",
       "      <td>15.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>1.066000e+03</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>0.222000</td>\n",
       "      <td>20.000000</td>\n",
       "      <td>34.000000</td>\n",
       "      <td>4.000000</td>\n",
       "      <td>1.306000e+03</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>22.581000</td>\n",
       "      <td>20.000000</td>\n",
       "      <td>80.000000</td>\n",
       "      <td>16937.000000</td>\n",
       "      <td>2.497247e+07</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               Durat           Prot          Flags   PacketsBytes  \\\n",
       "count  645357.000000  645357.000000  645357.000000  645357.000000   \n",
       "mean        0.628296      10.347725      17.386899      17.501792   \n",
       "std         1.399220       9.414517      15.481148     123.108235   \n",
       "min         0.000000       1.000000       0.000000       1.000000   \n",
       "25%         0.000000       1.000000       2.000000       1.000000   \n",
       "50%         0.000000       7.000000      15.000000       1.000000   \n",
       "75%         0.222000      20.000000      34.000000       4.000000   \n",
       "max        22.581000      20.000000      80.000000   16937.000000   \n",
       "\n",
       "              Flows     Label  \n",
       "count  6.453570e+05  645357.0  \n",
       "mean   1.347249e+04       1.0  \n",
       "std    1.337653e+05       0.0  \n",
       "min    6.000000e+01       1.0  \n",
       "25%    2.610000e+02       1.0  \n",
       "50%    1.066000e+03       1.0  \n",
       "75%    1.306000e+03       1.0  \n",
       "max    2.497247e+07       1.0  "
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "print(Botnet_data.shape)\n",
    "new_column_name = ['Dateflowstart', 'Durat', 'Prot', 'SrcIPAddr:Port', 'DstIPAddr:Port', 'Flags', 'PacketsBytes', 'Flows', 'Label', 'Labels']\n",
    "numeric_data = pd.DataFrame(column_name)\n",
    "numeric_data = Botnet_data[new_column_name].copy()\n",
    "numeric_data.describe()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**Discretization**\n",
    "\n",
    "This part is used for part3 and part4."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:5: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n",
      "  \"\"\"\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:10: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n",
      "  # Remove the CWD from sys.path while we load stuff.\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:15: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n",
      "  from ipykernel import kernelapp as app\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:7: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n",
      "  import sys\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:12: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n",
      "  if sys.path[0] == '':\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:23: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:18: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n",
      "C:\\Users\\zinaw\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:21: FutureWarning: set_value is deprecated and will be removed in a future release. Please use .at[] or .iat[] accessors instead\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Durat</th>\n",
       "      <th>Prot</th>\n",
       "      <th>Flags</th>\n",
       "      <th>PacketsBytes</th>\n",
       "      <th>Flows</th>\n",
       "      <th>Label</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.000000</td>\n",
       "      <td>645357.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>0.251275</td>\n",
       "      <td>10.347725</td>\n",
       "      <td>17.386899</td>\n",
       "      <td>0.416758</td>\n",
       "      <td>1.673449</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>0.433747</td>\n",
       "      <td>9.414517</td>\n",
       "      <td>15.481148</td>\n",
       "      <td>0.493023</td>\n",
       "      <td>1.103632</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>2.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>7.000000</td>\n",
       "      <td>15.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>2.000000</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>1.000000</td>\n",
       "      <td>20.000000</td>\n",
       "      <td>34.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>3.000000</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>1.000000</td>\n",
       "      <td>20.000000</td>\n",
       "      <td>80.000000</td>\n",
       "      <td>1.000000</td>\n",
       "      <td>3.000000</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               Durat           Prot          Flags   PacketsBytes  \\\n",
       "count  645357.000000  645357.000000  645357.000000  645357.000000   \n",
       "mean        0.251275      10.347725      17.386899       0.416758   \n",
       "std         0.433747       9.414517      15.481148       0.493023   \n",
       "min         0.000000       1.000000       0.000000       0.000000   \n",
       "25%         0.000000       1.000000       2.000000       0.000000   \n",
       "50%         0.000000       7.000000      15.000000       0.000000   \n",
       "75%         1.000000      20.000000      34.000000       1.000000   \n",
       "max         1.000000      20.000000      80.000000       1.000000   \n",
       "\n",
       "               Flows     Label  \n",
       "count  645357.000000  645357.0  \n",
       "mean        1.673449       1.0  \n",
       "std         1.103632       0.0  \n",
       "min         0.000000       1.0  \n",
       "25%         1.000000       1.0  \n",
       "50%         2.000000       1.0  \n",
       "75%         3.000000       1.0  \n",
       "max         3.000000       1.0  "
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "for index,vallue in Botnet_data.iterrows():\n",
    "#     ------------------Durat-------------------------\n",
    "#     print(Botnet_data['Durat'][index])\n",
    "    if Botnet_data['Durat'][index] < 0.22:\n",
    "        numeric_data.set_value(index, 'Durat',int(0))\n",
    "    else:\n",
    "        numeric_data.set_value(index, 'Durat',int(1))\n",
    "#     ------------------PacketsBytes-------------------------\n",
    "    if Botnet_data['PacketsBytes'][index] <= 1.0:\n",
    "        numeric_data.set_value(index, 'PacketsBytes', 0)\n",
    "    else:\n",
    "        numeric_data.set_value(index, 'PacketsBytes',1)\n",
    "#     ------------------Flows-------------------------\n",
    "    if Botnet_data['Flows'][index] < 261.0:\n",
    "        numeric_data.set_value(index, 'Flows', 0)\n",
    "    else:\n",
    "        if 261.0 <= Botnet_data['Flows'][index]<1066.0:\n",
    "            numeric_data.set_value(index, 'Flows', 1)\n",
    "        else:\n",
    "            if 1066.0 <= Botnet_data['Flows'][index]<1306.0:\n",
    "                numeric_data.set_value(index, 'Flows', 2)\n",
    "            else:\n",
    "                numeric_data.set_value(index, 'Flows', 3)\n",
    "numeric_data['Durat'] = numeric_data['Durat'].astype(int)\n",
    "numeric_data.describe()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Dateflowstart</th>\n",
       "      <th>Durat</th>\n",
       "      <th>Prot</th>\n",
       "      <th>SrcIPAddr:Port</th>\n",
       "      <th>DstIPAddr:Port</th>\n",
       "      <th>Flags</th>\n",
       "      <th>PacketsBytes</th>\n",
       "      <th>Flows</th>\n",
       "      <th>Label</th>\n",
       "      <th>Labels</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2011-08-18 10:19:13.392</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.86.110:48102</td>\n",
       "      <td>74.125.232.214:443</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2011-08-18 10:19:13.411</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.85.88:56949</td>\n",
       "      <td>147.32.80.13:80</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2011-08-18 10:19:13.460</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.84.59:2768</td>\n",
       "      <td>74.125.108.208:80</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2011-08-18 10:19:13.486</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.84.59:56058</td>\n",
       "      <td>74.125.232.215:443</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2011-08-18 10:19:13.689</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.84.164:34588</td>\n",
       "      <td>195.24.232.164:80</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "             Dateflowstart  Durat  Prot       SrcIPAddr:Port  \\\n",
       "0  2011-08-18 10:19:13.392      0     1  147.32.86.110:48102   \n",
       "1  2011-08-18 10:19:13.411      1     1   147.32.85.88:56949   \n",
       "2  2011-08-18 10:19:13.460      1     1    147.32.84.59:2768   \n",
       "3  2011-08-18 10:19:13.486      0     1   147.32.84.59:56058   \n",
       "4  2011-08-18 10:19:13.689      1     1  147.32.84.164:34588   \n",
       "\n",
       "       DstIPAddr:Port  Flags  PacketsBytes  Flows  Label      Labels  \n",
       "0  74.125.232.214:443      0             0      0      1  LEGITIMATE  \n",
       "1     147.32.80.13:80      0             1      3      1  LEGITIMATE  \n",
       "2   74.125.108.208:80      0             1      3      1  LEGITIMATE  \n",
       "3  74.125.232.215:443      0             0      0      1  LEGITIMATE  \n",
       "4   195.24.232.164:80      0             1      3      1  LEGITIMATE  "
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "numeric_data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "2\n",
      "3\n",
      "78\n",
      "2\n",
      "4\n"
     ]
    }
   ],
   "source": [
    "print(len(np.unique(numeric_data['Durat'])))\n",
    "print(len(np.unique(numeric_data['Prot'])))\n",
    "print(len(np.unique(numeric_data['Flags'])))\n",
    "print(len(np.unique(numeric_data['PacketsBytes'])))\n",
    "print(len(np.unique(numeric_data['Flows'])))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "now we can apply algorithm1 in paper to combine all features\n",
    "\n",
    "as mentioned, for durat we choose 2 as number of clusters, 3 for prot, 78 for flags, 2 for packetbytes and 4 for flows. our space is 2\\*3\\*78\\*2\\*4=3744"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "645357\n"
     ]
    }
   ],
   "source": [
    "# features: durat, prot, flags, packetbytes, flows\n",
    "# 2*3*78*2*4=3744\n",
    "feature_dict = {'Durat':2, 'Prot':3, 'Flags':78, 'PacketsBytes':2, 'Flows':4}\n",
    "code_list = []\n",
    "for index, row in numeric_data.iterrows():\n",
    "    code = 0\n",
    "    spacesize = 3744\n",
    "    code = code + numeric_data['Durat'][index]*(spacesize/feature_dict['Durat'])\n",
    "    spacesize = spacesize/feature_dict['Durat']\n",
    "    code = code + numeric_data['Prot'][index]*(spacesize/feature_dict['Prot'])\n",
    "    spacesize = spacesize/feature_dict['Prot']\n",
    "    code = code + numeric_data['Flags'][index]*(spacesize/feature_dict['Flags'])\n",
    "    spacesize = spacesize/feature_dict['Flags']\n",
    "    code = code + numeric_data['PacketsBytes'][index]*(spacesize/feature_dict['PacketsBytes'])\n",
    "    spacesize = spacesize/feature_dict['PacketsBytes']\n",
    "    code = code + numeric_data['Flows'][index]*(spacesize/feature_dict['Flows'])\n",
    "    spacesize = spacesize/feature_dict['Flows']\n",
    "    code_list.append(int(code)) \n",
    "print(len(code_list))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 124,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Dateflowstart</th>\n",
       "      <th>Durat</th>\n",
       "      <th>Prot</th>\n",
       "      <th>SrcIPAddr:Port</th>\n",
       "      <th>DstIPAddr:Port</th>\n",
       "      <th>Flags</th>\n",
       "      <th>PacketsBytes</th>\n",
       "      <th>Flows</th>\n",
       "      <th>Label</th>\n",
       "      <th>Labels</th>\n",
       "      <th>code</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2011-08-18 10:19:13.392</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.86.110:48102</td>\n",
       "      <td>74.125.232.214:443</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "      <td>624</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2011-08-18 10:19:13.411</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.85.88:56949</td>\n",
       "      <td>147.32.80.13:80</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "      <td>2503</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2011-08-18 10:19:13.460</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.84.59:2768</td>\n",
       "      <td>74.125.108.208:80</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "      <td>2503</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2011-08-18 10:19:13.486</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.84.59:56058</td>\n",
       "      <td>74.125.232.215:443</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "      <td>624</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2011-08-18 10:19:13.689</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>147.32.84.164:34588</td>\n",
       "      <td>195.24.232.164:80</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>LEGITIMATE</td>\n",
       "      <td>2503</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "             Dateflowstart  Durat  Prot       SrcIPAddr:Port  \\\n",
       "0  2011-08-18 10:19:13.392      0     1  147.32.86.110:48102   \n",
       "1  2011-08-18 10:19:13.411      1     1   147.32.85.88:56949   \n",
       "2  2011-08-18 10:19:13.460      1     1    147.32.84.59:2768   \n",
       "3  2011-08-18 10:19:13.486      0     1   147.32.84.59:56058   \n",
       "4  2011-08-18 10:19:13.689      1     1  147.32.84.164:34588   \n",
       "\n",
       "       DstIPAddr:Port  Flags  PacketsBytes  Flows  Label      Labels  code  \n",
       "0  74.125.232.214:443      0             0      0      1  LEGITIMATE   624  \n",
       "1     147.32.80.13:80      0             1      3      1  LEGITIMATE  2503  \n",
       "2   74.125.108.208:80      0             1      3      1  LEGITIMATE  2503  \n",
       "3  74.125.232.215:443      0             0      0      1  LEGITIMATE   624  \n",
       "4   195.24.232.164:80      0             1      3      1  LEGITIMATE  2503  "
      ]
     },
     "execution_count": 124,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "code_ = pd.Series(code_list)\n",
    "numeric_data['code'] = code_.values\n",
    "numeric_data.head()\n",
    "# numeric_data.to_csv('numeric_data_scenario10.csv', sep='\\t')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "all_source = np.unique(numeric_data['SrcIPAddr:Port'])\n",
    "source_dict = defaultdict(list)\n",
    "for val in numeric_data.iterrows():\n",
    "    source_dict[val[1][3]].append(val[1][10])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "67960\n",
      "67960\n"
     ]
    }
   ],
   "source": [
    "print(len(all_source))\n",
    "print(len(source_dict))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 128,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "length_of_training data sequence: 19136\n",
      "147.32.84.191 length of grams: 20821\n",
      "147.32.84.192 length of grams: 20813\n",
      "147.32.84.193 length of grams: 19875\n",
      "147.32.84.204 length of grams: 22145\n",
      "147.32.84.205 length of grams: 23871\n",
      "147.32.84.206 length of grams: 22488\n",
      "147.32.84.207 length of grams: 21165\n",
      "147.32.84.208 length of grams: 22183\n",
      "147.32.84.209 length of grams: 19404\n",
      "147.32.84.170 length of grams: 12\n",
      "147.32.84.134 length of grams: 0\n",
      "147.32.84.164 length of grams: 694\n",
      "length_of_sequence: 193471\n"
     ]
    }
   ],
   "source": [
    "def find_ngrams(input_list, n):\n",
    "    return zip(*[input_list[i:] for i in range(n)])\n",
    "infected_host = ['147.32.84.165','147.32.84.191','147.32.84.192','147.32.84.193','147.32.84.204',\n",
    "                 '147.32.84.205','147.32.84.206','147.32.84.207','147.32.84.208','147.32.84.209']\n",
    "normal_host = ['147.32.84.170','147.32.84.134','147.32.84.164']\n",
    "# not reliable: '147.32.87.36','147.32.80.9','147.32.87.11'\n",
    "choose_infected_host = '147.32.84.165'\n",
    "test_ip = ['147.32.84.191','147.32.84.192','147.32.84.193','147.32.84.204','147.32.84.205',\n",
    "           '147.32.84.206','147.32.84.207','147.32.84.208','147.32.84.209','147.32.84.170',\n",
    "           '147.32.84.134','147.32.84.164']\n",
    "n = 3\n",
    "infected_gram_dict = defaultdict(list)\n",
    "normal_gram_dict = defaultdict(list)\n",
    "first_two_list = []\n",
    "gram_list = []\n",
    "possible_gram = source_dict[choose_infected_host]\n",
    "grams = list(find_ngrams(possible_gram, n))\n",
    "for pick_first_two in grams:\n",
    "    first_two_list.append(pick_first_two[0:2])\n",
    "gram_list.append(grams)\n",
    "print('length_of_training data sequence:', len(gram_list[0]))\n",
    "\n",
    "sliding_window_width = 4\n",
    "test_gram_dict = defaultdict(list)\n",
    "test_list = []\n",
    "length_of_sequence = 0\n",
    "for temp in test_ip:\n",
    "    possible_gram = source_dict[temp]\n",
    "    grams = list(find_ngrams(possible_gram, sliding_window_width))\n",
    "    print(temp,'length of grams:', len(grams))\n",
    "    test_gram_dict[temp] = grams\n",
    "    test_list.append(list(set(grams)))\n",
    "    length_of_sequence = length_of_sequence+len(grams)\n",
    "print('length_of_sequence:', length_of_sequence)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "we have 706 normal sequences and 192765 infected sequences(99.6%). In total we have 193471 sequences in test set and 19136 sequences in training set. Now we create labels for sequences. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 131,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "193471 [1, 1, 1, 1, 1, 0, 0, 0, 0, 0]\n"
     ]
    }
   ],
   "source": [
    "def zerolistmaker(n):\n",
    "    listofzeros = [0] * n\n",
    "    return listofzeros\n",
    "def oneslistmaker(n):\n",
    "    listofones = [1] * n\n",
    "    return listofones\n",
    "test_sequence_label = oneslistmaker(192765) + zerolistmaker(706)\n",
    "print(len(test_sequence_label),test_sequence_label[192760:192770])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "to avoid probability of 0, we add 1 for each counter."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 136,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "193471\n"
     ]
    }
   ],
   "source": [
    "test_prob = []\n",
    "cookie_dict ={}\n",
    "for single_test_ip in test_ip:\n",
    "    single_ip_grams = test_gram_dict[single_test_ip]\n",
    "    for test_gram in single_ip_grams:\n",
    "        if test_gram[0:2] in cookie_dict:\n",
    "            prob1 = cookie_dict[test_gram[0:2]]\n",
    "        else:\n",
    "            prob1 = (first_two_list.count(test_gram[0:2])+1)/len(gram_list[0])\n",
    "        if test_gram[0:3] in cookie_dict:\n",
    "            prob2 = cookie_dict[test_gram[0:3]]\n",
    "        else:\n",
    "            prob2 = (gram_list[0].count(test_gram[0:3])+1)/len(gram_list[0])\n",
    "        if test_gram[1:4] in cookie_dict:\n",
    "            prob3 =  cookie_dict[test_gram[1:4]]\n",
    "        else:\n",
    "            prob3 = (gram_list[0].count(test_gram[1:4])+1)/len(gram_list[0])\n",
    "        cookie_dict[test_gram[0:2]]= prob1\n",
    "        cookie_dict[test_gram[0:3]]= prob2\n",
    "        cookie_dict[test_gram[1:4]]= prob3\n",
    "        prob = prob1*prob2*prob3\n",
    "        test_prob.append(prob)\n",
    "print(len(test_prob))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 181,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "1.4270740634742588e-13"
      ]
     },
     "execution_count": 181,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "np.percentile(test_prob, 0.4)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 182,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "193471\n",
      "193471\n"
     ]
    }
   ],
   "source": [
    "predicted_sequence_label =  []\n",
    "for probability in test_prob:\n",
    "    if probability<= 1.4270740634742588e-13:\n",
    "        label = 0\n",
    "    else:\n",
    "        label = 1\n",
    "    predicted_sequence_label.append(label)  \n",
    "print(len(predicted_sequence_label))\n",
    "print(len(test_sequence_label))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 183,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "TP: 192361\n",
      "FP: 0\n",
      "TN: 706\n",
      "FN: 404\n",
      "precision: 1.0\n",
      "recall: 0.9979041838508028\n",
      "accuracy 0.9979118317473936\n"
     ]
    }
   ],
   "source": [
    "TP=0\n",
    "FN=0\n",
    "TN=0\n",
    "FP=0\n",
    "for index,val in enumerate(test_sequence_label):\n",
    "    if predicted_sequence_label[index]==1 and val ==1:\n",
    "        TP +=1\n",
    "    if predicted_sequence_label[index]==0 and val ==1:\n",
    "        FN +=1\n",
    "    if predicted_sequence_label[index]==0 and val ==0:\n",
    "        TN +=1\n",
    "    if predicted_sequence_label[index]==1 and val ==0:\n",
    "        FP +=1\n",
    "#     print(index, predicted_sequence_label[index],val,'\\n' ,TP,FN,TN,FP)\n",
    "print ('TP:',TP)\n",
    "print ('FP:',FP)\n",
    "print ('TN:',TN)\n",
    "print ('FN:',FN)\n",
    "print ('precision:' ,1.0 * TP/(TP+FP))\n",
    "print ('recall:' ,1.0 *TP/(TP+FN))\n",
    "print('accuracy',(TP+TN)/len(predicted_sequence_label))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "now we calculate host level accuracy. If over 50% sequences are defined as infected, we define host as infected. Or we define it as normal. I print sum of predicted label for each host, which means the number of infected sequences in our prediction. We know the ground truth is that the first 9 host are infected and the rest three are normal."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 199,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "20781\n",
      "20764\n",
      "19838\n",
      "22097\n",
      "23817\n",
      "22452\n",
      "21120\n",
      "22127\n",
      "19364\n",
      "1\n",
      "0\n"
     ]
    }
   ],
   "source": [
    "# 147.32.84.191 length of grams: 20821\n",
    "print(sum(predicted_sequence_label[0:20820]))\n",
    "# 20781 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.192 length of grams: 20813\n",
    "print(sum(predicted_sequence_label[20820:41633]))\n",
    "# 20764 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.193 length of grams: 19875\n",
    "print(sum(predicted_sequence_label[41633:61508]))\n",
    "# 19838 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.204 length of grams: 22145\n",
    "print(sum(predicted_sequence_label[61508:83653]))\n",
    "# 22097 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.205 length of grams: 23871\n",
    "print(sum(predicted_sequence_label[83653:107524]))\n",
    "# 23817 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.206 length of grams: 22488\n",
    "print(sum(predicted_sequence_label[107524:130012]))\n",
    "# 22452 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.207 length of grams: 21165\n",
    "print(sum(predicted_sequence_label[130012:151177]))\n",
    "# 21120 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.208 length of grams: 22183\n",
    "print(sum(predicted_sequence_label[151177:173360]))\n",
    "# 22127 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.209 length of grams: 19404\n",
    "print(sum(predicted_sequence_label[173360:192764]))\n",
    "# 19364 so we assign this host as infected\n",
    "\n",
    "# 147.32.84.170 length of grams: 12\n",
    "print(sum(predicted_sequence_label[192764:192776]))\n",
    "# 1 so we assign this host as normal\n",
    "\n",
    "# 147.32.84.134 length of grams: 0\n",
    "\n",
    "# 147.32.84.164 length of grams: 694\n",
    "print(sum(predicted_sequence_label[192776:193470]))\n",
    "# 0 so we assign this host as normal\n",
    "\n",
    "# length_of_sequence: 193471"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.4"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
